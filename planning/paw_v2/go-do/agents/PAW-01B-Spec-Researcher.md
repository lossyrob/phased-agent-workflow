# PAW-01B Spec Researcher Agent Analysis

## Category
**Specialized Role**

This agent is a **research subagent** invoked by PAW-01A Specification, not a standalone stage in the main workflow. It performs delegated research work and returns control to the Specification agent.

## Current Responsibilities
- Answer factual questions about **existing system behavior** (behavioral, not implementation details)
- Explore repository code and documentation to answer research questions
- Build `SpecResearch.md` incrementally, question-by-question
- Distinguish between internal system facts vs. external knowledge requiring manual input
- Classify unanswered questions as "Open Unknowns" with rationale
- Maintain behavioral focus (WHAT system does, not HOW it's implemented)

## Artifacts Produced
- **`SpecResearch.md`** at `.paw/work/<feature-slug>/SpecResearch.md`
  - Contains: Summary, Agent Notes (preserved from prompt), Research Findings (per question), Open Unknowns, User-Provided External Knowledge section

## Dependencies
- **Inputs from**: 
  - `prompts/01B-spec-research.prompt.md` (generated by PAW-01A Specification)
  - Repository codebase and documentation
  - Optional: Issue content via MCP tools
- **Outputs to**: PAW-01A Specification (returns to integrate research findings into Spec.md)
- **Tools used**: 
  - `paw_get_context` (mandatory first step)
  - `paw_call_agent` (for handoff back to Specification)
  - File reading operations (full file reads, no limit/offset)
  - MCP tools for issue/platform operations (preferred over CLI)

## Subagent Invocations
- **Does not invoke other agents** during work
- **Returns to PAW-01A Specification** upon completion (handoff, not invocation)

## V2 Mapping Recommendation

### Suggested v2 home: **Capability Skill** (Research capability)

This agent represents a **research capability** that could be extracted as a reusable skill:

1. **Behavioral Research Skill** - Answers questions about system behavior from code/docs
   - Input: Research questions + target codebase
   - Output: Structured research findings document
   - Key constraint: Behavioral focus only, no implementation details

### Subagent candidate: **Yes**

Strong candidate for subagent pattern because:
- Has clear input (prompt with questions) and output (SpecResearch.md)
- Performs bounded, delegated work
- Returns control to invoking agent (Spec Agent)
- Could be reused by other workflows needing behavioral research

### Skills to extract:
1. **Question-Answer Research Loop** - Iterate through questions, gather evidence, produce structured findings
2. **Open Unknown Classification** - Determine when a question cannot be answered and document rationale
3. **Behavioral vs Implementation Filtering** - Ensure outputs stay at behavioral level (valuable for other contexts)
4. **Incremental Document Building** - Build markdown artifacts section-by-section with idempotent updates

## Lessons Learned

### Pattern: Research Subagent
- **Insight**: Research agents are delegated work that returns to the invoking agent, not independent stages
- **V2 implication**: Research capabilities should be modeled as subagent invocations or skill calls, not workflow stages
- **Key signal**: Handoff returns to the previous stage (Spec Agent) rather than advancing to a new stage

### Pattern: Behavioral vs Implementation Separation
- **Insight**: PAW explicitly separates behavioral research (01B) from code/implementation research (02A)
- **V2 implication**: These are different capabilities with different constraints—may want separate skills or a parameterized research skill
- **Key signal**: The "Scope: Behavioral Documentation Only" section with explicit What/What NOT lists

### Pattern: Prompt-Driven Research
- **Insight**: Research agent is driven by a generated prompt file containing questions
- **V2 implication**: The prompt generation is part of the invoking agent's responsibility; research skill consumes the prompt
- **Key signal**: "Check if the prompt path was provided. If not: Share the path..."

### Anti-Pattern: Agent as Gatekeeper
- **Insight**: Agent has "Anti-Evaluation Directives" to prevent scope creep into suggestions/improvements
- **V2 implication**: Research skills need clear constraints on output scope—this is a good guardrail pattern
- **Key signal**: CRITICAL section about "YOUR JOB IS TO DESCRIBE THE SYSTEM AS IT EXISTS TODAY"

### Pattern: Idempotent Artifact Updates
- **Insight**: Agent explicitly builds documents incrementally and preserves existing sections
- **V2 implication**: Skill outputs should follow idempotent update patterns for reliability
- **Key signal**: "Re-running with the same inputs should reproduce the same document"
